---
description: 
globs: 
alwaysApply: true
---
# DDD 和 CQRS 规范指南

## 领域驱动设计 (DDD)

### 领域模型
- 使用充血模型
- 实体包含业务规则
- 值对象不可变
- 聚合根保证一致性

### 领域服务
- 处理跨实体的业务逻辑
- 实现领域规则
- 不包含基础设施代码

### 仓储模式
- 定义仓储接口在领域层
- 实现在基础设施层
- 使用 GORM 实现数据访问

## 命令查询职责分离 (CQRS)

### 命令处理
- 命令处理器处理写操作
- 实现事务管理
- 发布领域事件
- 更新写模型

### 查询处理
- 查询处理器处理读操作
- 优化查询性能
- 使用缓存策略
- 维护读模型

### 事件处理
- 实现事件总线
- 处理领域事件
- 更新读模型
- 实现最终一致性

## 模块化设计

### 模块边界
- 清晰的模块边界
- 通过接口通信
- 避免循环依赖
- 使用依赖注入

### 模块内部
- 实现 DDD 模式
- 实现 CQRS 模式
- 独立的领域模型
- 独立的仓储实现
